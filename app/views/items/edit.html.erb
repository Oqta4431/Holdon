<div class="p-4 space-y-4">

    <!-- 戻るボタン（左上） -->
    <%= link_to item_path, class: "btn btn-ghost btn-square" do %>
      <svg
        class="h-8 w-8 text-color-neutral-content"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6" />
      </svg>
    <% end %>

      <%= form_with model: @item, class: "mt-6 space-y-5" do |f| %>

        <!-- URL（任意） -->
        <div class="space-y-2">
          <div class="flex items-start gap-3">
            <!-- URL icon (Heroicons) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"
                class="h-6 w-6 shrink-0 mt-3"
            >
              <g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd">
                <path d="M8.914 6.025a.75.75 0 0 1 1.06 0a3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402a.75.75 0 0 1 1.251.827a2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828a.75.75 0 0 1 0-1.06"/>
                <path d="M7.086 9.975a.75.75 0 0 1-1.06 0a3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402a.75.75 0 0 1-1.251-.827a2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828a.75.75 0 0 1 0 1.06"/>
              </g>
            </svg>

            <div class="flex-1">
              <%= f.text_field :url,
                class: "w-full bg-transparent outline-none py-2 border-b border-base-content/30 focus:border-base-content placeholder:text-base-content/40",
                placeholder: "商品URL",
                autocomplete: "off" %>

              <div class="mt-2 text-xs text-base-content/60">
                自動取得：Amazon / 楽天（予定）
              </div>
            </div>
          </div>
        </div>

        <!-- 画像 -->
        <div class="pl-9">
          <div class="w-full h-28 rounded-box border border-base-content/20 bg-base-100 flex flex-col items-center justify-center gap-1 px-3">

            <% if @item.item_image.attached? %>
              <%= image_tag @item.item_image.variant(:thumb), class: "w-20 h-20 object-cover rounded-box" %>
            <% else %>
              <!-- Image icon (Heroicons) -->
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 20 20"
                  class="h-7 w-7 opacity-60"
              >
                <path fill="currentColor" fill-rule="evenodd"
                  d="M1 8a2 2 0 0 1 2-2h.93a2 2 0 0 0 1.664-.89l.812-1.22A2 2 0 0 1 8.07 3h3.86a2 2 0 0 1 1.664.89l.812 1.22A2 2 0 0 0 16.07 6H17a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2zm13.5 3a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0M10 14a3 3 0 1 0 0-6a3 3 0 0 0 0 6"
                  clip-rule="evenodd"
                />
              </svg>
              <div class="text-xs text-base-content/60">画像を追加</div>
            <% end %>

            <%= f.file_field :item_image,
              accept: "image/*,image/heic,image/heif,image/heic-sequence,image/heif-sequence",
              capture: "environment",
              class: "file-input file-input-bordered file-input-xs w-full max-w-xs" %>
          </div>

          <p class="mt-2 text-xs text-base-content/60">
            ※ URLから取得できる場合は自動で画像を表示（予定）
          </p>
        </div>

        <!-- 商品名（必須） -->
        <div>
          <div class="flex items-start gap-3">
            <!-- Name icon + required badge -->
            <span class="relative h-6 w-6 shrink-0 mt-5">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                  class="h-6 w-6">
                <path fill="currentColor"
                  d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157l3.712 3.712l1.157-1.157a2.625 2.625 0 0 0 0-3.712m-2.218 5.93l-3.712-3.712l-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32z"
                />
              </svg>

              <span class="absolute -top-2 -right-2 text-error text-sm leading-none">*</span>
            </span>

            <div class="flex-1">
              <%= f.text_field :name,
                class: "w-full bg-transparent outline-none py-2 border-b border-base-content/30 focus:border-base-content placeholder:text-base-content/40",
                placeholder: "商品名" %>
            </div>
          </div>
        </div>

        <!-- 値段（必須） -->
        <div>
          <div class="flex items-start gap-3">
            <!-- Price icon + required badge -->
            <span class="relative h-6 w-6 shrink-0 mt-5">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 20 20"
                  class="h-6 w-6">
                <path fill="currentColor" fill-rule="evenodd"
                  d="M10 18a8 8 0 1 0 0-16a8 8 0 0 0 0 16M7.346 5.294a.75.75 0 0 0-1.192.912L9.056 10H6.75a.75.75 0 0 0 0 1.5h2.5v1h-2.5a.75.75 0 0 0 0 1.5h2.5v1.25a.75.75 0 0 0 1.5 0V14h2.5a.75.75 0 1 0 0-1.5h-2.5v-1h2.5a.75.75 0 1 0 0-1.5h-2.306l2.902-3.794a.75.75 0 1 0-1.192-.912L10 8.765z"
                  clip-rule="evenodd"
                />
              </svg>

              <span class="absolute -top-2 -right-2 text-error text-sm leading-none">*</span>
            </span>

            <div class="flex-1">
              <%= f.number_field :price,
                class: "w-full bg-transparent outline-none py-2 border-b border-base-content/30 focus:border-base-content placeholder:text-base-content/40",
                placeholder: "値段",
                inputmode: "numeric" %>
            </div>
          </div>
        </div>

        <!-- カテゴリ（ダミー） -->
        <div class="space-y-2">
          <div class="flex items-start gap-3">
            <!-- Category icon (Heroicons) -->
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 20 20"
                  class="h-6 w-6"
              >
                <path fill="currentColor"
                  d="M3.75 3A1.75 1.75 0 0 0 2 4.75v3.26a3.24 3.24 0 0 1 1.75-.51h12.5c.644 0 1.245.188 1.75.51V6.75A1.75 1.75 0 0 0 16.25 5h-4.836a.25.25 0 0 1-.177-.073L9.823 3.513A1.75 1.75 0 0 0 8.586 3zm0 6A1.75 1.75 0 0 0 2 10.75v4.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0 0 18 15.25v-4.5A1.75 1.75 0 0 0 16.25 9z"
                />
              </svg>

            <div class="flex-1">
              <input
                type="text"
                class="w-full bg-transparent outline-none py-2 border-b border-base-content/30 placeholder:text-base-content/40
                      cursor-not-allowed opacity-70"
                placeholder="カテゴリ（未実装）"
                disabled
              />
            </div>
          </div>
        </div>

        <!-- メモ（任意） -->
        <div>
          <div class="flex items-start gap-3">
            <!-- Memo icon (Heroicons) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"
                class="h-6 w-6 shrink-0 mt-1"
            >
              <path fill="currentColor" fill-rule="evenodd"
                d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2zm1 5.75A.75.75 0 0 1 5.75 7h4.5a.75.75 0 0 1 0 1.5h-4.5A.75.75 0 0 1 5 7.75m0 3a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75"
                clip-rule="evenodd"
              />
            </svg>

            <div class="flex-1">
              <%= f.text_area :memo,
                class: "w-full bg-base-100 border border-base-content/20 rounded-box p-3 outline-none focus:border-base-content placeholder:text-base-content/40",
                rows: 5,
                placeholder: "説明" %>
            </div>
          </div>
        </div>

        <!-- 保存ボタン -->
        <div class="pt-2">
          <%= f.submit "保存", class: "btn w-full bg-primary text-primary-content hover:bg-primary/90 border-none" %>
        </div>

      <% end %>
</div>
