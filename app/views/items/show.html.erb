<div class="p-4 space-y-4">

  <!-- 上部アイコンバー：左に戻る / 右に編集・削除 -->
  <div class="flex items-center justify-between">
    <!-- 戻るボタン（左上） -->
    <%= link_to items_path, class: "btn btn-ghost btn-square" do %>
      <svg
        class="h-8 w-8 text-color-neutral-content"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6" />
      </svg>
    <% end %>

    <!-- 右上：編集・削除（横並び） -->
    <div class="flex items-center gap-2">
      <!-- 編集ボタン -->
      <%= link_to edit_item_path(@item), class: "btn btn-ghost btn-square" do %>
        <svg
          class="h-8 w-8 text-color-neutral-content"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round">
          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
        </svg>
      <% end %>

      <!-- 削除ボタン -->
      <%= link_to item_path(@item),
          data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" },
          class: "btn btn-ghost btn-square" do %>
        <svg
          class="h-8 w-8 text-color-neutral-content"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round">
          <polyline points="3 6 5 6 21 6" />
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
          <line x1="10" y1="11" x2="10" y2="17" />
          <line x1="14" y1="11" x2="14" y2="17" />
        </svg>
      <% end %>
    </div>
  </div>

  <!-- 上：商品カード（画像タップで item.url に遷移） -->
  <%# item.url があるときだけリンク化 %>
  <% wrapper_tag = @item.url.present? ? :a : :div %>

  <<%= wrapper_tag %>
    <% if @item.url.present? %>
      href="<%= @item.url %>"
      target="_blank"
      rel="noopener noreferrer"
      class="block"
    <% end %>
  >
    <div class="card bg-base-100 shadow-sm border">
      <div class="card-body p-3">
        <div class="flex gap-3 items-center">
          <!-- 仮画像 -->
          <div class="w-20 h-20 bg-base-200 rounded-box flex items-center justify-center shrink-0">
            <span class="text-sm text-base-content/60">画像</span>
          </div>

          <div class="min-w-0">
            <div class="font-bold text-base leading-tight line-clamp-2">
              <%= @item.name %>
            </div>

            <div class="mt-1 text-sm font-semibold">
              ¥ <%= number_with_delimiter(@item.price) %>
            </div>

            <% if @item.url.present? %>
              <div class="mt-1 text-xs text-base-content/60">
                タップで商品ページへ
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </<%= wrapper_tag %>>

  <!-- 説明（memo） -->
  <div class="card bg-base-100 shadow-sm border">
    <div class="card-body p-3">
      <div class="text-sm font-bold mb-2">説明</div>

      <% if @item.memo.present? %>
        <div class="text-sm whitespace-pre-wrap leading-relaxed"><%= @item.memo %></div>
      <% else %>
        <div class="text-sm text-base-content/50">
          まだ説明がありません
        </div>
      <% end %>
    </div>
  </div>

</div>
